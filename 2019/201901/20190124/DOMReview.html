<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        /* input{
            position: absolute;
            left: 0;top: 0;
            z-index: 10;
            padding-left: 0px;
        } */
        div {
            width: 100px;
            height: 100px;
            position: absolute;
            border: 1px solid#000;
            margin-top: 50px;
            background-color: red;
        }
    </style>
</head>

<body>
    <div id="dv"></div>
    <input type="button" value="按钮1" id="btn1">
    <input type="button" value="按钮2" id="btn2">
    <script src="../../douxu.js"></script>
    <script>
        function my$(id) {
            return document.getElementById(id);
        }
        //封装动画函数
        // function animate(element, target) {
        //     //清除定时器 
        //     clearInterval(element.timeId);
        //     //设置定时器
        //     element.timeId = setInterval(function () {
        //         //获取当前位置
        //         var current = element.offsetLeft;
        //         //设置每步移动的距离
        //         var step = (target - current) / 10;
        //         //判断往前移动还是往后移动
        //         step = step > 0 ? Math.ceil(step) : Math.floor(step);
        //         //当前移动到了的位置
        //         current += step;
        //         // if (Math.abs(current - target) > Math.abs(step)) {
        //         //     element.style.left = current + "px";
        //         // } else {
        //         //     // clearInterval(element.timeId);
        //         //     element.style.left = target + "px";
        //         // }
        //         element.style.left = current + "px";
        //         if (current == target) {
        //             clearInterval(element.timeId);
        //         }
        //         //测试代码
        //         console.log("目标位置" + target + ",当前位置" + current + ",每次移动的步数" + step);
        //     }, 20)
        // }



        // //匀速动画
        // function animate(element, target) {
        //     //为什么要在设置定时器前先清理定时器
        //     clearInterval(element.timeId);
        //     //设置定时器
        //     element.timeId = setInterval(function () {
        //         //获取当前位置
        //         var current = element.offsetLeft;
        //         //每次移动的步数
        //         var step = 10;
        //         //判断向前走像反方向走
        //         step = current < target ? step : -step;
        //         current += step;
        //         if (Math.abs(current - target) > Math.abs(step)) {
        //             element.style.left = current + "px";
        //         } else {
        //             clearInterval(element.timeId);
        //             element.style.left = target + "px";
        //         }
        //     }, 20)
        // }

        // //变速动画
        // function animate(element, target) {

        //     clearInterval(element.timeId);
        //     element.timeId = setInterval(function () {
        //         var current = element.offsetLeft;
        //         var step =(target - current) / 10;
        //         step = step > 0 ? Math.ceil(step) : Math.floor(step);
        //         current += step;
        //         // if (Math.abs(current - target) > Math.abs(step)) {
        //         //     element.style.left = current + "px";
        //         // } else {
        //         //     element.style.left = target + "px";
        //         // }
        //         //当前位置
        //         element.style.left = current + "px";
        //         //当前位置到达目标位置时清除定时器
        //         if (current == target) {
        //             clearInterval(element.timeId);
        //         }
        //     }, 20)
        // }


        // function getStyle(element, attr) {
        //     //返回值为字符串类型，返回的是属性的值
        //     return window.getComputedStyle ? window.getComputedStyle(element, null)[attr] : element.currentStyle[attr];
        // }

        // //变速动画获取元素任意属性值
        // function animate(element, attr, target) {
        //     clearInterval(element.timeId);
        //     element.timeId = setInterval(function () {
        //         //因为attr的返回值是字符串，所以用parseInt转换为整型
        //         var current = parseInt(getStyle(element, attr));
        //         var step = (target - current) / 10;
        //         step = step > 0 ? Math.ceil(step) : Math.floor(step);
        //         current += step;
        //         element.style[attr] = current + "px";
        //         if (current == target) {
        //             clearInterval(element.timeId);
        //         }
        //         console.log("目标距离" + target + "，当前位置" + current + "，每次移动的距离" + step);
        //     }, 20)
        // }

        // //返回任意一个元素的任意一个属性的值    attr为属性的名字
        // function getStyle(element, attr) {
        //     //先判断浏览器是否支持getComputedStyle这个属性,如果有这个属性则使用window.getCompytedStyle(element, null)[attr] //谷歌火狐支持，IE8不支持
        //     //否则使用element.currentStyle[attr]属性    //IE8支持，火狐谷歌不支持
        //     return window.getComputedStyle ? window.getCompytedStyle(element, null)[attr] : element.currentStyle[attr];
        // }
        // //变速动画函数 
        // function animate(element, attr, target) {
        //     //清楚定时器是为了保证只有一个定时器
        //     clearInterval(element.timeId);
        //     //设置定时器
        //     element.timeId = setInterval(function () {
        //         //获取当前位置  因为函数getStyle的返回值是字符串类型，所以转换整型
        //         var current = parseInt(getStyle(element, attr));
        //         //每次移动的距离
        //         var step = (target - current) / 10;
        //         //判断向前走还是向后走  如果是正的，则向上取整，如果是负数，则向下取整
        //         step = step > 0 ? Math.ceil(step) : Math.ceil(step);
        //         current += step;
        //         //判断是否到达了目标位置
        //         element.style[attr] = current + "px";
        //         //到达目标位置清除定时器
        //         if (current == target) {
        //             clearInterval(element.timeId);
        //         };
        //         //测试代码
        //         console.log("当前位置" + current + "，目标位置" + target + "，每次移动的距离" + step);
        //     }, 20)
        // }

        //
        // function getStyle(element, attr) {
        //     return window.getComputedStyle ? window.getComputedStyle(element, null)[attr] : element.currentStyle[attr];
        // }

        // function animate(element, json, fn) {
        //     clearInterval(element.timeId);
        //     element.timeId = setInterval(function () {
        //         var flag = true;
        //         for (var attr in json) {
        //             if (attr == "opacity") {
        //                 var current = getStyle(element, attr) * 100;
        //                 var target = json[attr] * 100;
        //                 var step = (target - current) / 10;
        //                 step = step > 0 ? Math.ceil(step) : Math.floor(step);
        //                 current += step;
        //                 element.style[attr] = current / 100;
        //             } else if (attr == "zIndex") {
        //                 element.style[attr] = json[attr];
        //             } else {
        //                 var flag = true;
        //                 var current = parseInt(getStyle(element, attr));
        //                 var target = json[attr];
        //                 var step = (target - current) / 10;
        //                 step = step > 0 ? Math.ceil(step) : Math.floor(step);
        //                 current += step;
        //                 element.style[attr] = current + "px";
        //             }
        //             if (current != target) {
        //                 flag = false;
        //                 if (fn) {
        //                     fn();
        //                 }
        //             }
        //         }
        //         if (flag) {
        //             clearInterval(element.timeId);
        //         }
        //         console.log("目标位置" + target + "当前位置" + current + "每次移动的位置" + step);
        //     }, 20)
        // }


        // 测试
        my$("btn1").onclick = function () {
            animate(my$("dv"), {
                "height": 400,
                "width": 300,
                "left": 400,
                "opacity": 0.8,
                "zIndex": 0.5
            });
        }
        my$("btn2").onclick = function () {
            animate(my$("dv"), {
                "height": 10,
                "width": 20,
                "left": 10,
                "opacity": .1,
                "zIndex": 100
            });
        }
    </script>
</body>

</html>